# Shell变量

Shell编程语言是非类型的解释型语言，不需要事先声明一个变量。Shell给一个变量赋值实际上就是定义了这个变量，在Linux支持的所有shell中，都可以使用赋值符号（=）为变量赋值

变量定义规则：
- 变量名可以由字母、数字和下划线组成，但是不能以数字开头。
- 在Bash中，变量的默认类型都是字符串型，如果要进行数值运算，则必须指定变量类型为数字型
- 变量用等号连接值，等号左右两侧不能有空格
- 变量的值如果有空格，需要使用单引号或者双引号包括。其中双引号括起来的内容"$"、"\"和反引号都有特殊含义，而单引号括起来的内容都是普通字符
- 在变量的值中，可以使用"\"转义符
- 如果需要增加变量的值，那么可以进行变量值的叠加。不过变量需要用双引号包含"$变量名"或使用${变量名}包含变量
- 如果是把命令的结果作为变量值赋予变量，则需要使用反引号或$()包含命令
- 环境变量名建议大写，便于区分

## 变量的分类

- 用户自定义变量：这种变量是最常见的变量，由用户自由定义变量名和变量的值
- 环境变量：这种变量主要保存的是和系统操作环境相关的数据。环境变量的变量名可以自由定义，但是一般对系统起作用的环境变量的变量名是系统预先设定好的
- 位置参数变量：这种变量主要是用来向脚本当中传递参数或数据的，变量名不能自定义，变量作用是固定的
- 预定义变量：Bash中定义好的变量，变量名不能自定义，变量作用也是固定的

## 用户自定义变量

### 变量定义

```shell
test=123
name="shen chao"
```

### 变量调用

```shell
echo $name
echo $test
```

### 变量查看

set [选项]

选项： 

-u ：如果设定此选项，调用未声明变量会报错（默认无任何提示）

-x ：如果设定此选项，在命令执行之前，会把命令先输出一次

### 变量删除

unset 变量名

## 环境变量

环境变量则是在创建他们的Shell脚本中使用及派生出来的任意子进程中使用

### 环境变量设置

```SHELL
export age="18"
```

### 环境变量查询和删除

env命令和set命令的区别。set命令可以查看所有变量，而env命令只能查看环境变量

```shell
#删除环境变量
unset gender 
env |grep gender
```

env命令可以查询到所有的环境变量，开始还有一些变量不是环境变量，却是和Bash操作接口相关的变量，这些变量也对Bash的终端起到重要的作用。这些变量就只能使用set命令来查看

### 常见的系统变量

$0：当前脚本的名称

$n：当前脚本的第n个参数，n=1,2......9

$*：当前脚本的所有参数（不包括程序本身）

$#：当前脚本的参数个数（不包括程序本身）

$？：命令或程序执行后的状态，一般返回0表示执行成功

$UID：当前用户的ID

$PWD：当前所在的目录

## 位置参数变量

| 位置参数变量 | 作 用 | 
| ----- | ----- |
| $n | n为数字，$0代表命令本身，$1-$9代表第一到第九个参数，十以上的参数需要用大括号包含，如${10} |
| $* | 这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体 |
| $@ | 这个变量也代表命令行中所有的参数，不过$@把每个参数区分对待 |
| $# | 这个变量代表命令行中所有参数的个数 |

```shell
vim count.sh
```

```shell
#!/bin/bash

#给num1变量赋值是第一个参数
num1=$1
#给num2变量赋值是第一个参数
num2=$2
#变量sum的和就是num1加上num2
sum=$(($num1 + $num2))
#打印出sum的值
echo $sum
```
脚本执行 
```shell
./count.sh 1 2
```

```shell
vim parameters.sh

#!/bin/bash
 
# @author：恒宇
# @date：2020/8/28 15:16
# @description：

#使用$#代表所有参数个数
echo "A total of $# parameters"
#使用$*代表所有的参数
echo "The parameters is:$*"
#使用$@也代表所有的参数
echo "The parameters is:$@"

#脚本执行
./parameters.sh 6 7 8
```

## 预定义变量

| 预定义变量 | 作 用 |
| --- | --- |
| $? | 最后一次执行的命令的返回状态。如果这个变量的值为0，证明上一个命令执行正确；如果这个变量的值未非0（具体哪一个数，由命令自己来决定），则证明上一个命令执行不正确 |
| $$ | 当前进程的进程号（PID） |
| $! | 后台运行的最后一个进程的进程号（PID） |


